<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"> 
    <head> 
        <meta http-equiv="content-type" content="text/html; charset=utf-8" /> 
        <title>Undo and Redo</title>
        
        <link href="http://netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap.min.css" rel="stylesheet">
        
        <script type="text/javascript" src="../js/undomanager.js"></script>
        <script type="text/javascript" src="js/circledrawer.js"></script>
                
        <script defer>
            window.onload = function() {
                
                var undoManager = new UndoManager();
                
                var circleDrawer = new CircleDrawer('view');
                circleDrawer.setUndoManager(undoManager);
                
                var btnUndo = document.getElementById('btnUndo');
                var btnRedo = document.getElementById('btnRedo');
                var btnClear = document.getElementById('btnClear');
                
                function updateUI() {
                    btnUndo.disabled = !undoManager.hasUndo();
                    btnRedo.disabled = !undoManager.hasRedo();
                }
                undoManager.setCallback(updateUI);

                btnUndo.onclick = function() {
                    undoManager.undo();
                    updateUI();
                };
                btnRedo.onclick = function() {
                    undoManager.redo();
                    updateUI();
                };
                btnClear.onclick = function() {
                    undoManager.clear();
                    updateUI();
                };
                
                updateUI();
            };
        </script>
        <style type="text/css" media="all"> 
            body {
                font-family:arial, sans-serif;
                padding: 20px;
                background: #f6f6f6;
            }
            p {
            	margin: 0 0 1em 0;
            }
            #view {
                margin:.5em 0 .25em 0;
                border:1px solid #ccc;
                background: #fff;
            }
            .container {
                width: 600px;
            }
        </style>
    </head>  
    <body>
        <div class="container">
            <div class="row">
                <div class="commands">
                    <button type="button" class="btn btn-primary" id="btnUndo" href="#">Undo</button>
                    <button type="button" class="btn btn-primary" id="btnRedo" href="#">Redo</button>
                    <button type="button" class="btn btn-default pull-right" id="btnClear" href="#">Clear memory</button>
                </div>
                <div>
                    <canvas id="view" width="600" height="400"></canvas>
                </div>
                <p class="comment mute">Click on the area to create circles</p>
            </div>
        </div>
    </body>  
</html>  